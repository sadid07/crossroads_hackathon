{"ast":null,"code":"var _jsxFileName = \"/home/kawsar/crossroads/crossroads-font-end/src/containers/Login.js\";\nimport React from \"react\";\nimport { Button, Form, Grid, Header, Message, Segment } from \"semantic-ui-react\";\nimport { connect } from \"react-redux\";\nimport { NavLink, Redirect, Link } from \"react-router-dom\";\nimport { authLogin } from \"../store/actions/auth\";\nimport \"./Login.css\";\nimport { GoogleLogin } from 'react-google-login';\nimport axios from \"axios\";\nimport FacebookLogin from 'react-facebook-login';\nimport Zoom from 'react-reveal/Zoom'; // import TiSocialFacebookCircular from 'react-icons/lib/ti/social-facebook-circular';\n\nimport './Login.css'; // import * as actionTypes from \"./actionTypes\";\n\nimport { authSuccess, authFail, checkAuthTimeout } from '../store/actions/auth';\nimport { endpoint, endpointlocahost, endpointlocahostsocilauth } from \"../constants\";\n\nclass LoginForm extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      email: \"\",\n      password: \"\",\n      token: \"\",\n      isLogged: false,\n      formData: {\n        email: \"\"\n      }\n    };\n\n    this.handleChange = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      const {\n        email,\n        password\n      } = this.state;\n      this.props.login(email, password);\n    };\n\n    this.responseGoogle = response => {\n      this.setState({\n        token: response.tokenObj.id_token,\n        loading: false\n      });\n      const {\n        token\n      } = this.state;\n      axios.post(`${endpointlocahost}/social_auth/google/`, {\n        auth_token: token\n      }).then(res => {\n        const token = res.data.tokens.access;\n        const expirationDate = new Date(new Date().getTime() + 3600 * 1000);\n        localStorage.setItem(\"token\", token);\n        localStorage.setItem(\"expirationDate\", expirationDate);\n        setInterval(function () {\n          window.location.reload();\n        }, 1000);\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.responseFacebook = response => {\n      console.log(response, '.................');\n      this.setState({\n        token: response.accessToken,\n        loading: false\n      });\n      const {\n        token\n      } = this.state;\n      axios.post(`${endpointlocahost}/social_auth/facebook/`, {\n        auth_token: token\n      }).then(res => {\n        const token = res.data.tokens.access;\n        const expirationDate = new Date(new Date().getTime() + 3600 * 1000);\n        localStorage.setItem(\"token\", token);\n        localStorage.setItem(\"expirationDate\", expirationDate);\n        setInterval(function () {\n          window.location.reload();\n        }, 1000);\n      }).catch(err => {});\n    };\n  }\n\n  //  refreshPage =() =>{\n  //   window.location.reload();\n  // }\n  render() {\n    window.scrollTo(0, 0);\n    const {\n      error,\n      loading,\n      token\n    } = this.props;\n    const {\n      email,\n      password\n    } = this.state;\n\n    if (Object.values(this.props).length > 1) {\n      if (this.props.error == null) {\n        if (!this.state.isLogged) {}\n      } else {\n        var d = this.props.error;\n        var err_password_match_err = this.props.error.data; // ...................... error_messes_password error messes.......................\n\n        if (d == null) {} else {\n          var err_messes = this.props.error.detail;\n          document.getElementById(\"error_messes\").innerHTML = \"\"; // ...................... email error messes.......................\n\n          if (err_messes == null) {\n            document.getElementById(\"error_messes\").innerHTML = \"\";\n          } else {\n            document.getElementById(\"error_messes\").innerHTML = err_messes;\n          }\n        }\n      }\n    }\n\n    if (token) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 14\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Grid, {\n      textAlign: \"center\",\n      style: {\n        height: \"100vh\"\n      },\n      verticalAlign: \"middle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Grid.Column, {\n      style: {\n        maxWidth: 450\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Zoom, {\n      left: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h6\", {\n      className: \"error_messes\",\n      id: \"error_messes\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Form, {\n      size: \"large\",\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Segment, {\n      stacked: true,\n      style: {\n        borderRadius: \"18px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(\"h4\", {\n      style: {\n        textAlign: \"center\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 19\n      }\n    }, \"Log-in to your account\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(Form.Input, {\n      onChange: this.handleChange,\n      value: email,\n      name: \"email\",\n      fluid: true,\n      icon: \"user\",\n      iconPosition: \"left\",\n      placeholder: \"email\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(Form.Input, {\n      onChange: this.handleChange,\n      fluid: true,\n      value: password,\n      name: \"password\",\n      icon: \"lock\",\n      iconPosition: \"left\",\n      placeholder: \"Password\",\n      type: \"password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      color: \"teal\",\n      fluid: true,\n      size: \"large\",\n      loading: loading,\n      disabled: loading,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 19\n      }\n    }, \"Login\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(GoogleLogin, {\n      clientId: \"356944659457-nm7vn4p2jtmcvd20gsqqgiep04qaq6rt.apps.googleusercontent.com\",\n      buttonText: \"Login\",\n      onSuccess: this.responseGoogle,\n      onFailure: this.responseGoogle,\n      cookiePolicy: 'single_host_origin',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(FacebookLogin, {\n      textButton: \" \\u00a0 \\u00a0 Login\" // size='small'\n      // for test\n      // local host \n      ,\n      appId: \"152971560061948\" // local host it is working\n      // appId=\"566800850960501\"\n      // orbitplug\n      // appId=\"781826136014066\"\n      // for production\n      // appId=\"779646426301443\"\n      ,\n      autoLoad: false,\n      scope: \"email\" // fields=\"name,email,picture\"\n      ,\n      callback: this.responseFacebook,\n      cssClass: \"my-facebook-button-class\",\n      icon: /*#__PURE__*/React.createElement(\"svg\", {\n        style: {\n          color: '#1771E6'\n        },\n        xmlns: \"http://www.w3.org/2000/svg\",\n        width: \"25\",\n        height: \"25\",\n        fill: \"currentColor\",\n        class: \"bi bi-facebook\",\n        viewBox: \"0 0 16 16\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(\"path\", {\n        d: \"M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951z\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 23\n        }\n      })),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 19\n      }\n    }))), /*#__PURE__*/React.createElement(Message, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 15\n      }\n    }, \"New to us? \", /*#__PURE__*/React.createElement(NavLink, {\n      to: \"/signup\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 28\n      }\n    }, \"Sign Up\")))))));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    loading: state.auth.loading,\n    error: state.auth.error,\n    token: state.auth.token\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    login: (email, password) => dispatch(authLogin(email, password))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LoginForm);","map":{"version":3,"sources":["/home/kawsar/crossroads/crossroads-font-end/src/containers/Login.js"],"names":["React","Button","Form","Grid","Header","Message","Segment","connect","NavLink","Redirect","Link","authLogin","GoogleLogin","axios","FacebookLogin","Zoom","authSuccess","authFail","checkAuthTimeout","endpoint","endpointlocahost","endpointlocahostsocilauth","LoginForm","Component","state","email","password","token","isLogged","formData","handleChange","e","setState","target","name","value","handleSubmit","preventDefault","props","login","responseGoogle","response","tokenObj","id_token","loading","post","auth_token","then","res","data","tokens","access","expirationDate","Date","getTime","localStorage","setItem","setInterval","window","location","reload","catch","err","console","log","responseFacebook","accessToken","render","scrollTo","error","Object","values","length","d","err_password_match_err","err_messes","detail","document","getElementById","innerHTML","height","maxWidth","borderRadius","textAlign","color","mapStateToProps","auth","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport {\n  Button,\n  Form,\n  Grid,\n  Header,\n  Message,\n  Segment\n} from \"semantic-ui-react\";\nimport { connect } from \"react-redux\";\nimport { NavLink, Redirect, Link } from \"react-router-dom\";\nimport { authLogin } from \"../store/actions/auth\";\nimport \"./Login.css\"\nimport { GoogleLogin } from 'react-google-login';\nimport axios from \"axios\";\nimport FacebookLogin from 'react-facebook-login';\nimport Zoom from 'react-reveal/Zoom';\n\n// import TiSocialFacebookCircular from 'react-icons/lib/ti/social-facebook-circular';\nimport './Login.css'\n\n// import * as actionTypes from \"./actionTypes\";\nimport { authSuccess, authFail, checkAuthTimeout } from '../store/actions/auth'\nimport { endpoint, endpointlocahost, endpointlocahostsocilauth } from \"../constants\";\n\nclass LoginForm extends React.Component {\n  state = {\n    email: \"\",\n    password: \"\",\n    token: \"\",\n    isLogged: false,\n\n    formData: {\n      email: \"\",\n\n\n    },\n  };\n\n\n\n  handleChange = e => {\n    this.setState({ [e.target.name]: e.target.value });\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n    const { email, password } = this.state;\n    this.props.login(email, password);\n\n  };\n\n  responseGoogle = (response) => {\n    this.setState({ token: response.tokenObj.id_token, loading: false });\n    const { token } = this.state;\n    axios\n      .post(`${endpointlocahost}/social_auth/google/`, {\n        auth_token: token,\n\n      })\n\n      .then(res => {\n        const token = res.data.tokens.access;\n        const expirationDate = new Date(new Date().getTime() + 3600 * 1000);\n        localStorage.setItem(\"token\", token);\n        localStorage.setItem(\"expirationDate\", expirationDate);\n\n        setInterval(function () {\n          window.location.reload();\n        }, 1000);\n      })\n      .catch(err => {\n        console.log(err)\n\n      });\n\n\n  }\n\n\n\n\n\n  responseFacebook = (response) => {\n    console.log(response,'.................');\n\n\n    this.setState({ token: response.accessToken, loading: false });\n    const { token } = this.state;\n    axios\n\n      .post(`${endpointlocahost}/social_auth/facebook/`, {\n        auth_token: token,\n\n      })\n      .then(res => {\n        const token = res.data.tokens.access;\n        const expirationDate = new Date(new Date().getTime() + 3600 * 1000);\n        localStorage.setItem(\"token\", token);\n        localStorage.setItem(\"expirationDate\", expirationDate);\n        setInterval(function () {\n          window.location.reload();\n        }, 1000);\n\n\n      })\n      .catch(err => {\n\n\n      });\n\n\n\n\n  }\n\n\n  //  refreshPage =() =>{\n  //   window.location.reload();\n  // }\n\n  render() {\n    window.scrollTo(0, 0);\n    const { error, loading, token } = this.props;\n    const { email, password } = this.state;\n    if (Object.values(this.props).length > 1) {\n\n      if ((this.props.error) == null) {\n        if (!this.state.isLogged) {\n\n        }\n      }\n      else {\n     \n        var d = this.props.error\n        var err_password_match_err = this.props.error.data\n\n        // ...................... error_messes_password error messes.......................\n\n        if (d == null) {\n        }\n        else {\n          var err_messes = this.props.error.detail\n          \n\n          document.getElementById(\"error_messes\").innerHTML = \"\";\n       \n\n          // ...................... email error messes.......................\n\n          if (err_messes == null) {\n            document.getElementById(\"error_messes\").innerHTML = \"\";\n\n          }\n\n          else {\n\n            document.getElementById(\"error_messes\").innerHTML = err_messes;\n\n          }\n       \n\n        }\n\n\n\n      }\n\n    }\n\n\n\n\n\n\n\n\n\n    if (token) {\n      return <Redirect to=\"/\" />;\n    }\n    return (\n      <>\n\n\n\n\n        <Grid\n          textAlign=\"center\"\n          style={{ height: \"100vh\" }}\n          verticalAlign=\"middle\"\n        >\n           \n          <Grid.Column style={{ maxWidth: 450 }}>\n          <Zoom left>\n            {/* {error && <p>{this.props.error.message}</p>} */}\n            <h6 className='error_messes' id=\"error_messes\"></h6>\n\n\n            <React.Fragment >\n              <Form size=\"large\" onSubmit={this.handleSubmit}>\n\n\n\n                <Segment stacked style={{ borderRadius: \"18px\" }}>\n\n                  <br></br>\n                  <h4 style={{ textAlign: \"center\" }}>Log-in to your account</h4>\n                  <br></br>\n\n\n\n\n                  <Form.Input\n                    onChange={this.handleChange}\n                    value={email}\n                    name=\"email\"\n                    fluid\n                    icon=\"user\"\n                    iconPosition=\"left\"\n                    placeholder=\"email\"\n                  />\n                  <Form.Input\n                    onChange={this.handleChange}\n                    fluid\n                    value={password}\n                    name=\"password\"\n                    icon=\"lock\"\n                    iconPosition=\"left\"\n                    placeholder=\"Password\"\n                    type=\"password\"\n                  />\n\n                  <Button\n                    color=\"teal\"\n                    fluid\n                    size=\"large\"\n                    loading={loading}\n                    disabled={loading}\n                  >\n                    Login\n                </Button>\n                  <br></br>\n\n\n\n\n\n\n                  <GoogleLogin\n                    clientId=\"356944659457-nm7vn4p2jtmcvd20gsqqgiep04qaq6rt.apps.googleusercontent.com\"\n                    buttonText=\"Login\"\n                    onSuccess={this.responseGoogle}\n                    onFailure={this.responseGoogle}\n                    cookiePolicy={'single_host_origin'}\n                  />\n\n\n                  <FacebookLogin\n                    textButton={\" \\u00a0 \\u00a0 Login\"}\n                    // size='small'\n                    // for test\n                    // local host \n                    appId=\"152971560061948\"\n\n\n                    // local host it is working\n                    // appId=\"566800850960501\"\n\n\n                    // orbitplug\n                    // appId=\"781826136014066\"\n\n                    // for production\n                    // appId=\"779646426301443\"\n\n                    autoLoad={false}\n                    scope=\"email\"\n                    // fields=\"name,email,picture\"\n                    callback={this.responseFacebook}\n                    cssClass=\"my-facebook-button-class\"\n                    icon={<svg style={{ color: '#1771E6' }} xmlns=\"http://www.w3.org/2000/svg\" width=\"25\" height=\"25\" fill=\"currentColor\" class=\"bi bi-facebook\" viewBox=\"0 0 16 16\">\n                      <path d=\"M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951z\" />\n                    </svg>}\n\n                  >\n\n\n                  </FacebookLogin>\n\n                </Segment>\n              </Form>\n              <Message>\n                New to us? <NavLink to=\"/signup\">Sign Up</NavLink>\n\n\n\n\n\n     \n     \n         \n        \n      \n              </Message>\n            </React.Fragment>\n            </Zoom>\n          </Grid.Column>\n          \n        </Grid>\n\n\n\n\n\n      </>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    loading: state.auth.loading,\n    error: state.auth.error,\n    token: state.auth.token\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    login: (email, password) => dispatch(authLogin(email, password))\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(LoginForm);\n"]},"metadata":{},"sourceType":"module"}