{"ast":null,"code":"var _jsxFileName = \"/home/kawsar/crossroads/orbitplug-font-end/src/containers/OrderSummary.js\";\nimport React from \"react\";\nimport { Container, Dimmer, Header, Icon, Image, Label, Loader, Table, Button, Message, Segment, Item } from \"semantic-ui-react\";\nimport { connect } from \"react-redux\";\nimport { authAxios } from \"../utils\";\nimport { addToCartURL, orderSummaryURL, orderItemDeleteURL, orderItemUpdateQuantityURL } from \"../constants\";\nimport { endpoint, endpointlocahost } from \"../constants\";\nimport { fetchCart } from \"../store/actions/cart\";\nimport { withRouter, Link, NavLink, Redirect } from \"react-router-dom\";\n\nclass OrderSummary extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      data: null,\n      error: null,\n      loading: false\n    };\n\n    this.handleFetchOrder = () => {\n      this.setState({\n        loading: true\n      });\n      authAxios.get(orderSummaryURL).then(res => {\n        this.setState({\n          data: res.data,\n          loading: false\n        });\n        window.scrollTo(0, 0);\n      }).catch(err => {// if (err.response.status === 404) {\n        //   this.setState({\n        //     error: \"You currently do not have an order\",\n        //     loading: false\n        //   });\n        // } else {\n        //   this.setState({ error: err, loading: false });\n        // }\n      });\n    };\n\n    this.renderVariations = orderItem => {\n      let text = \"\";\n      orderItem.item_variations.forEach(iv => {\n        text += `${iv.variation}: ${iv.value}, `;\n      });\n      return text;\n    };\n\n    this.handleFormatData = itemVariations => {\n      // convert [{id: 1},{id: 2}] to [1,2] - they're all variations\n      return Object.keys(itemVariations).map(key => {\n        return itemVariations[key].id;\n      });\n    };\n\n    this.handleAddToCart = (slug, itemVariations) => {\n      this.setState({\n        loading: true\n      });\n      const variations = this.handleFormatData(itemVariations);\n      authAxios.post(addToCartURL, {\n        slug,\n        variations\n      }).then(res => {\n        this.handleFetchOrder();\n        this.props.refreshCart();\n        this.setState({\n          loading: false\n        });\n      }).catch(err => {\n        this.setState({\n          error: err,\n          loading: false\n        });\n      });\n    };\n\n    this.handleRemoveQuantityFromCart = slug => {\n      authAxios.post(orderItemUpdateQuantityURL, {\n        slug\n      }).then(res => {\n        this.handleFetchOrder();\n        this.props.refreshCart();\n      }).catch(err => {\n        this.setState({\n          error: err\n        });\n      });\n    };\n\n    this.handleRemoveItem = itemID => {\n      authAxios.delete(orderItemDeleteURL(itemID)).then(res => {\n        this.handleFetchOrder();\n        this.props.refreshCart();\n      }).catch(err => {\n        this.setState({\n          error: err\n        });\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.handleFetchOrder();\n    window.scrollTo(0, 0);\n  }\n\n  render() {\n    const {\n      data,\n      error,\n      loading\n    } = this.state;\n    const {\n      isAuthenticated\n    } = this.props;\n\n    if (!isAuthenticated) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/login\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 14\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Container, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"order__hidden__desktop\",\n      style: {\n        textAlign: \"center\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }\n    }, \"Order Summary\"), error && /*#__PURE__*/React.createElement(Message, {\n      error: true,\n      header: \"There was an error\",\n      content: JSON.stringify(error),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 11\n      }\n    }), data && /*#__PURE__*/React.createElement(Table, {\n      celled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Table.Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Table.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Table.HeaderCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 17\n      }\n    }, \"Image\"), /*#__PURE__*/React.createElement(Table.HeaderCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 17\n      }\n    }, \" Name\"), /*#__PURE__*/React.createElement(Table.HeaderCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 17\n      }\n    }, \" Price\"), /*#__PURE__*/React.createElement(Table.HeaderCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 17\n      }\n    }, \"Quantity\"), /*#__PURE__*/React.createElement(Table.HeaderCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 17\n      }\n    }, \"Total item price\"))), /*#__PURE__*/React.createElement(Table.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 13\n      }\n    }, data.order_items.map((orderItem, i) => {\n      return /*#__PURE__*/React.createElement(Table.Row, {\n        key: orderItem.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(Table.Cell, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(NavLink, {\n        to: `/single-product/${orderItem.item.id}`,\n        style: {\n          textDecoration: 'none',\n          color: 'black'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        style: {\n          width: 70,\n          height: 70\n        },\n        src: `${endpointlocahost}${orderItem.item.image}`,\n        class: \"rounded mx-auto d-block\",\n        alt: \"...\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 27\n        }\n      }))), /*#__PURE__*/React.createElement(Table.Cell, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(NavLink, {\n        to: `/single-product/${orderItem.item.id}`,\n        style: {\n          textDecoration: 'none',\n          color: 'black'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 23\n        }\n      }, orderItem.item.title.slice(0, 90), \"... \", \" \", this.renderVariations(orderItem))), /*#__PURE__*/React.createElement(Table.Cell, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 21\n        }\n      }, \"$\", orderItem.item.price), /*#__PURE__*/React.createElement(Table.Cell, {\n        textAlign: \"center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Icon, {\n        name: \"minus\",\n        style: {\n          float: \"left\",\n          cursor: \"pointer\"\n        },\n        onClick: () => this.handleRemoveQuantityFromCart(orderItem.item.slug),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 23\n        }\n      }), orderItem.quantity, /*#__PURE__*/React.createElement(Icon, {\n        name: \"plus\",\n        style: {\n          float: \"right\",\n          cursor: \"pointer\"\n        },\n        onClick: () => this.handleAddToCart(orderItem.item.slug, orderItem.item_variations),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 23\n        }\n      })), /*#__PURE__*/React.createElement(Table.Cell, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 21\n        }\n      }, orderItem.item.discount_price && /*#__PURE__*/React.createElement(Label, {\n        color: \"green\",\n        ribbon: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 25\n        }\n      }, \"ON DISCOUNT\"), \"$\", orderItem.final_price, /*#__PURE__*/React.createElement(Icon, {\n        name: \"trash\",\n        color: \"red\",\n        style: {\n          float: \"right\",\n          cursor: \"pointer\"\n        },\n        onClick: () => this.handleRemoveItem(orderItem.id),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 23\n        }\n      })));\n    }), /*#__PURE__*/React.createElement(Table.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Table.Cell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Table.Cell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Table.Cell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Table.Cell, {\n      textAlign: \"right\",\n      colSpan: \"2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 17\n      }\n    }, \"Order Total: $\", data.total))), /*#__PURE__*/React.createElement(Table.Footer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Table.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Table.HeaderCell, {\n      colSpan: \"5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/checkout\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      floated: \"right\",\n      color: \"yellow\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 21\n      }\n    }, \"Order Now\")))))))), /*#__PURE__*/React.createElement(Container, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"order__hidden__phone\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 7\n      }\n    }, error && /*#__PURE__*/React.createElement(Message, {\n      error: true,\n      header: \"There was an error\",\n      content: JSON.stringify(error),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 11\n      }\n    }), data && /*#__PURE__*/React.createElement(Table, {\n      celled: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Table.Header, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Table.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 21\n      }\n    }, \"Order Summary\"))), /*#__PURE__*/React.createElement(Table.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 13\n      }\n    }, data.order_items.map((orderItem, i) => {\n      return /*#__PURE__*/React.createElement(Table.Row, {\n        key: orderItem.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(Table.Cell, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(NavLink, {\n        to: `/single-product/${orderItem.item.id}`,\n        style: {\n          textDecoration: 'none',\n          color: 'black'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        style: {\n          width: 70,\n          height: 70\n        },\n        src: `${endpointlocahost}${orderItem.item.image}`,\n        class: \"rounded mx-auto d-block\",\n        alt: \"...\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 27\n        }\n      }))), /*#__PURE__*/React.createElement(Table.Cell, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(NavLink, {\n        to: `/single-product/${orderItem.item.id}`,\n        style: {\n          textDecoration: 'none',\n          color: 'black'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 23\n        }\n      }, orderItem.item.title.slice(0, 70), \"... \", \" \", this.renderVariations(orderItem))), /*#__PURE__*/React.createElement(Table.Cell, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 33\n        }\n      }, \"Price :  \\u09F3\"), orderItem.item.price), /*#__PURE__*/React.createElement(Table.Cell, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 23\n        }\n      }, \" Total item price : \\u09F3\"), orderItem.final_price, /*#__PURE__*/React.createElement(Icon, {\n        name: \"trash\",\n        color: \"red\",\n        style: {\n          float: \"right\",\n          cursor: \"pointer\"\n        },\n        onClick: () => this.handleRemoveItem(orderItem.id),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 23\n        }\n      })), /*#__PURE__*/React.createElement(Table.Cell, {\n        textAlign: \"center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Icon, {\n        name: \"minus\",\n        style: {\n          float: \"left\",\n          cursor: \"pointer\"\n        },\n        onClick: () => this.handleRemoveQuantityFromCart(orderItem.item.slug),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 23\n        }\n      }), orderItem.quantity, /*#__PURE__*/React.createElement(Icon, {\n        name: \"plus\",\n        style: {\n          float: \"right\",\n          cursor: \"pointer\"\n        },\n        onClick: () => this.handleAddToCart(orderItem.item.slug, orderItem.item_variations),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 23\n        }\n      })));\n    }), /*#__PURE__*/React.createElement(Table.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Table.Cell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Table.Cell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Table.Cell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Table.Cell, {\n      textAlign: \"right\",\n      colSpan: \"2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 17\n      }\n    }, \"Order Total: $\", data.total))), /*#__PURE__*/React.createElement(Table.Footer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 338,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Table.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Table.HeaderCell, {\n      colSpan: \"5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/checkout\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      floated: \"right\",\n      color: \"yellow\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 342,\n        columnNumber: 21\n      }\n    }, \"Order Now\")))))))));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    isAuthenticated: state.auth.token !== null\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    refreshCart: () => dispatch(fetchCart())\n  };\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(OrderSummary)); // export default connect(mapStateToProps)(OrderSummary);","map":{"version":3,"sources":["/home/kawsar/crossroads/orbitplug-font-end/src/containers/OrderSummary.js"],"names":["React","Container","Dimmer","Header","Icon","Image","Label","Loader","Table","Button","Message","Segment","Item","connect","authAxios","addToCartURL","orderSummaryURL","orderItemDeleteURL","orderItemUpdateQuantityURL","endpoint","endpointlocahost","fetchCart","withRouter","Link","NavLink","Redirect","OrderSummary","Component","state","data","error","loading","handleFetchOrder","setState","get","then","res","window","scrollTo","catch","err","renderVariations","orderItem","text","item_variations","forEach","iv","variation","value","handleFormatData","itemVariations","Object","keys","map","key","id","handleAddToCart","slug","variations","post","props","refreshCart","handleRemoveQuantityFromCart","handleRemoveItem","itemID","delete","componentDidMount","render","isAuthenticated","textAlign","JSON","stringify","order_items","i","item","textDecoration","color","width","height","image","title","slice","price","float","cursor","quantity","discount_price","final_price","total","mapStateToProps","auth","token","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport {\n  Container,\n  Dimmer,\n  Header,\n  Icon,\n  Image,\n  Label,\n  Loader,\n  Table,\n  Button,\n  Message,\n  Segment,\n  Item\n} from \"semantic-ui-react\";\nimport { connect } from \"react-redux\";\nimport { authAxios } from \"../utils\";\nimport {\n  addToCartURL,\n  orderSummaryURL,\n  orderItemDeleteURL,\n  orderItemUpdateQuantityURL\n} from \"../constants\";\nimport { endpoint, endpointlocahost } from \"../constants\";\nimport { fetchCart } from \"../store/actions/cart\";\nimport { withRouter, Link, NavLink, Redirect} from \"react-router-dom\";\n\nclass OrderSummary extends React.Component {\n  state = {\n    data: null,\n    error: null,\n    loading: false\n  };\n\n  componentDidMount() {\n    this.handleFetchOrder();\n    window.scrollTo(0, 0);\n\n  }\n\n\n\n  handleFetchOrder = () => {\n    this.setState({ loading: true });\n    authAxios\n      .get(orderSummaryURL)\n      .then(res => {\n        this.setState({ data: res.data, loading: false });\n        window.scrollTo(0, 0);\n\n\n      })\n      .catch(err => {\n\n        // if (err.response.status === 404) {\n        //   this.setState({\n        //     error: \"You currently do not have an order\",\n        //     loading: false\n        //   });\n        // } else {\n        //   this.setState({ error: err, loading: false });\n        // }\n      });\n  };\n\n  renderVariations = orderItem => {\n    let text = \"\";\n    orderItem.item_variations.forEach(iv => {\n      text += `${iv.variation}: ${iv.value}, `;\n    });\n    return text;\n  };\n\n  handleFormatData = itemVariations => {\n    // convert [{id: 1},{id: 2}] to [1,2] - they're all variations\n    return Object.keys(itemVariations).map(key => {\n      return itemVariations[key].id;\n    });\n  };\n\n  handleAddToCart = (slug, itemVariations) => {\n    this.setState({ loading: true });\n    const variations = this.handleFormatData(itemVariations);\n    authAxios\n      .post(addToCartURL, { slug, variations })\n      .then(res => {\n        this.handleFetchOrder();\n        this.props.refreshCart();\n        this.setState({ loading: false });\n      })\n      .catch(err => {\n        this.setState({ error: err, loading: false });\n      });\n  };\n\n  handleRemoveQuantityFromCart = slug => {\n    authAxios\n      .post(orderItemUpdateQuantityURL, { slug })\n      .then(res => {\n        this.handleFetchOrder();\n        this.props.refreshCart();\n      })\n      .catch(err => {\n        this.setState({ error: err });\n      });\n  };\n\n  handleRemoveItem = itemID => {\n    authAxios\n      .delete(orderItemDeleteURL(itemID))\n      .then(res => {\n        this.handleFetchOrder();\n        this.props.refreshCart();\n      })\n      .catch(err => {\n        this.setState({ error: err });\n      });\n  };\n\n  render() {\n    const { data, error, loading } = this.state;\n    const { isAuthenticated } = this.props;\n    if (!isAuthenticated) {\n      return <Redirect to=\"/login\" />;\n    }\n\n    \n    return (\n  <>\n   \n    <Container >\n      <div className='order__hidden__desktop'  style = {{textAlign:\"center\"}}>\n        <h5>Order Summary</h5>\n        {error && (\n          <Message\n            error\n            header=\"There was an error\"\n            content={JSON.stringify(error)}\n          />\n        )}\n\n        {data && (\n          <Table celled>\n            <Table.Header>\n              <Table.Row>\n                <Table.HeaderCell>Image</Table.HeaderCell>\n                <Table.HeaderCell> Name</Table.HeaderCell>\n                <Table.HeaderCell> Price</Table.HeaderCell>\n                <Table.HeaderCell>Quantity</Table.HeaderCell>\n                <Table.HeaderCell>Total item price</Table.HeaderCell>\n              </Table.Row>\n            </Table.Header>\n\n            <Table.Body>\n              {data.order_items.map((orderItem, i) => {\n                return (\n                  <Table.Row key={orderItem.id}>\n\n                    <Table.Cell>\n                      <NavLink to={(`/single-product/${orderItem.item.id}`)} style={{ textDecoration: 'none', color: 'black' }}>\n\n                          <img style={{ width: 70, height: 70 }} src={`${endpointlocahost}${orderItem.item.image}`} class=\"rounded mx-auto d-block\" alt=\"...\"></img>\n                      </NavLink>\n\n                    </Table.Cell>\n\n                    <Table.Cell>\n                      <NavLink to={(`/single-product/${orderItem.item.id}`)} style={{ textDecoration: 'none', color: 'black' }}>\n\n                        {orderItem.item.title.slice(0, 90)}... {\" \"}\n                      {this.renderVariations(orderItem)}\n                       </NavLink>\n                    </Table.Cell>\n                   \n                    <Table.Cell>${orderItem.item.price}</Table.Cell>\n                    <Table.Cell textAlign=\"center\">\n                      <Icon\n                        name=\"minus\"\n                        style={{ float: \"left\", cursor: \"pointer\" }}\n                        onClick={() =>\n                          this.handleRemoveQuantityFromCart(orderItem.item.slug)\n                        }\n                      />\n                      {orderItem.quantity}\n                      <Icon\n                        name=\"plus\"\n                        style={{ float: \"right\", cursor: \"pointer\" }}\n                        onClick={() =>\n                          this.handleAddToCart(\n                            orderItem.item.slug,\n                            orderItem.item_variations\n                          )\n                        }\n                      />\n                    </Table.Cell>\n                  \n                    <Table.Cell>\n                      {orderItem.item.discount_price && (\n                        <Label color=\"green\" ribbon>\n                          ON DISCOUNT\n                        </Label>\n                      )}\n                      ${orderItem.final_price}\n                      <Icon\n                        name=\"trash\"\n                        color=\"red\"\n                        style={{ float: \"right\", cursor: \"pointer\" }}\n                        onClick={() => this.handleRemoveItem(orderItem.id)}\n                      />\n                    </Table.Cell>\n\n\n\n                  </Table.Row>\n                );\n              })}\n              <Table.Row>\n                <Table.Cell />\n                <Table.Cell />\n                <Table.Cell />\n                <Table.Cell textAlign=\"right\" colSpan=\"2\">\n                  Order Total: ${data.total}\n                </Table.Cell>\n              </Table.Row>\n            </Table.Body>\n\n            <Table.Footer>\n              <Table.Row>\n                <Table.HeaderCell colSpan=\"5\">\n                  <Link to=\"/checkout\">\n                    <Button floated=\"right\" color=\"yellow\">\n                      Order Now\n                    </Button>\n                  </Link>\n                </Table.HeaderCell>\n              </Table.Row>\n            </Table.Footer>\n          </Table>\n        )}\n      </div>\n\n    </Container>\n      \n    \n    <Container>\n      <div className='order__hidden__phone'>\n        {error && (\n          <Message\n            error\n            header=\"There was an error\"\n            content={JSON.stringify(error)}\n          />\n        )}\n\n        {data && (\n          <Table celled>\n            <Table.Header>\n              <Table.Row>\n                    <h5>Order Summary</h5>\n\n              </Table.Row>\n            </Table.Header>\n\n            <Table.Body>\n              {data.order_items.map((orderItem, i) => {\n                return (\n                  <Table.Row key={orderItem.id}>\n\n                    <Table.Cell>\n                      <NavLink to={(`/single-product/${orderItem.item.id}`)} style={{ textDecoration: 'none', color: 'black' }}>\n\n                          <img style={{ width: 70, height: 70 }} src={`${endpointlocahost}${orderItem.item.image}`} class=\"rounded mx-auto d-block\" alt=\"...\"></img>\n                      </NavLink>\n\n                    </Table.Cell>\n\n                    <Table.Cell>\n                      <NavLink to={(`/single-product/${orderItem.item.id}`)} style={{ textDecoration: 'none', color: 'black' }}>\n\n                        {orderItem.item.title.slice(0, 70)}... {\" \"}\n                      {this.renderVariations(orderItem)}\n                       </NavLink>\n                    </Table.Cell>\n                   \n                    <Table.Cell><b>Price :  ৳</b>{orderItem.item.price}</Table.Cell>\n                    \n                    <Table.Cell>\n\n                      <b> Total item price : ৳</b>{orderItem.final_price}\n                      <Icon\n                        name=\"trash\"\n                        color=\"red\"\n                        style={{ float: \"right\", cursor: \"pointer\" }}\n                        onClick={() => this.handleRemoveItem(orderItem.id)}\n                      />\n                    </Table.Cell>\n\n                    \n                    \n                    \n                    <Table.Cell textAlign=\"center\">\n                      <Icon\n                        name=\"minus\"\n                        style={{ float: \"left\", cursor: \"pointer\" }}\n                        onClick={() =>\n                          this.handleRemoveQuantityFromCart(orderItem.item.slug)\n                        }\n                      />\n                      {orderItem.quantity}\n                      <Icon\n                        name=\"plus\"\n                        style={{ float: \"right\", cursor: \"pointer\" }}\n                        onClick={() =>\n                          this.handleAddToCart(\n                            orderItem.item.slug,\n                            orderItem.item_variations\n                          )\n                        }\n                      />\n                    </Table.Cell>\n                  \n                  \n\n\n                  </Table.Row>\n                );\n              })}\n              <Table.Row>\n                <Table.Cell />\n                <Table.Cell />\n                <Table.Cell />\n                <Table.Cell textAlign=\"right\" colSpan=\"2\">\n                  Order Total: ${data.total}\n                </Table.Cell>\n              </Table.Row>\n            </Table.Body>\n\n            <Table.Footer>\n              <Table.Row>\n                <Table.HeaderCell colSpan=\"5\">\n                  <Link to=\"/checkout\">\n                    <Button floated=\"right\" color=\"yellow\">\n                      Order Now\n                    </Button>\n                  </Link>\n                </Table.HeaderCell>\n              </Table.Row>\n            </Table.Footer>\n          </Table>\n        )}\n          </div>\n    </Container>\n    \n\n</>\n\n\n\n\n\n\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    isAuthenticated: state.auth.token !== null\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    refreshCart: () => dispatch(fetchCart())\n  };\n};\n\n\n\n\n\nexport default withRouter(\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  )(OrderSummary)\n);\n\n\n\n\n\n// export default connect(mapStateToProps)(OrderSummary);\n"]},"metadata":{},"sourceType":"module"}