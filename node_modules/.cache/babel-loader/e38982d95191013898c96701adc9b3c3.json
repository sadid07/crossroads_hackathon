{"ast":null,"code":"var _jsxFileName = \"/home/kawsar/crossroads/crossroads-font-end/src/containers/Login.js\";\nimport React from \"react\";\nimport { Button, Form, Grid, Header, Message, Segment } from \"semantic-ui-react\";\nimport { connect } from \"react-redux\";\nimport { NavLink, Redirect, Link } from \"react-router-dom\";\nimport { authLogin } from \"../store/actions/auth\";\nimport \"./Login.css\";\nimport { GoogleLogin } from 'react-google-login';\nimport axios from \"axios\";\nimport FacebookLogin from 'react-facebook-login'; // import TiSocialFacebookCircular from 'react-icons/lib/ti/social-facebook-circular';\n\nimport './Login.css';\nimport './main.js'; // import * as actionTypes from \"./actionTypes\";\n\nimport { authSuccess, authFail, checkAuthTimeout } from '../store/actions/auth';\nimport { endpoint, endpointlocahost, endpointlocahostsocilauth } from \"../constants\";\n\nclass LoginForm extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      email: \"\",\n      password: \"\",\n      token: \"\",\n      isLogged: false,\n      formData: {\n        email: \"\"\n      }\n    };\n\n    this.handleChange = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      const {\n        email,\n        password\n      } = this.state;\n      this.props.login(email, password);\n    };\n\n    this.responseGoogle = response => {\n      this.setState({\n        token: response.tokenObj.id_token,\n        loading: false\n      });\n      const {\n        token\n      } = this.state;\n      axios.post(`${endpointlocahost}/social_auth/google/`, {\n        auth_token: token\n      }).then(res => {\n        const token = res.data.tokens.access;\n        const expirationDate = new Date(new Date().getTime() + 3600 * 1000);\n        localStorage.setItem(\"token\", token);\n        localStorage.setItem(\"expirationDate\", expirationDate);\n        setInterval(function () {\n          window.location.reload();\n        }, 1000);\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.responseFacebook = response => {\n      console.log(response.accessToken);\n      this.setState({\n        token: response.accessToken,\n        loading: false\n      });\n      const {\n        token\n      } = this.state;\n      axios.post(`${endpointlocahost}/social_auth/facebook/`, {\n        auth_token: token\n      }).then(res => {\n        const token = res.data.tokens.access;\n        const expirationDate = new Date(new Date().getTime() + 3600 * 1000);\n        localStorage.setItem(\"token\", token);\n        localStorage.setItem(\"expirationDate\", expirationDate);\n        setInterval(function () {\n          window.location.reload();\n        }, 1000);\n      }).catch(err => {});\n    };\n  }\n\n  //  refreshPage =() =>{\n  //   window.location.reload();\n  // }\n  render() {\n    const {\n      error,\n      loading,\n      token\n    } = this.props;\n    const {\n      email,\n      password\n    } = this.state;\n\n    if (Object.values(this.props).length > 1) {\n      if (this.props.error == null) {\n        if (!this.state.isLogged) {}\n      } else {\n        var d = this.props.error;\n        var err_password_match_err = this.props.error.data; // ...................... error_messes_password error messes.......................\n\n        if (d == null) {} else {\n          var err_messes = this.props.error.detail;\n          document.getElementById(\"error_messes\").innerHTML = \"\"; // ...................... email error messes.......................\n\n          if (err_messes == null) {\n            document.getElementById(\"error_messes\").innerHTML = \"\";\n          } else {\n            document.getElementById(\"error_messes\").innerHTML = err_messes;\n          }\n        }\n      }\n    }\n\n    if (token) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 14\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(React.Fragment, null);\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    loading: state.auth.loading,\n    error: state.auth.error,\n    token: state.auth.token\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    login: (email, password) => dispatch(authLogin(email, password))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LoginForm);","map":{"version":3,"sources":["/home/kawsar/crossroads/crossroads-font-end/src/containers/Login.js"],"names":["React","Button","Form","Grid","Header","Message","Segment","connect","NavLink","Redirect","Link","authLogin","GoogleLogin","axios","FacebookLogin","authSuccess","authFail","checkAuthTimeout","endpoint","endpointlocahost","endpointlocahostsocilauth","LoginForm","Component","state","email","password","token","isLogged","formData","handleChange","e","setState","target","name","value","handleSubmit","preventDefault","props","login","responseGoogle","response","tokenObj","id_token","loading","post","auth_token","then","res","data","tokens","access","expirationDate","Date","getTime","localStorage","setItem","setInterval","window","location","reload","catch","err","console","log","responseFacebook","accessToken","render","error","Object","values","length","d","err_password_match_err","err_messes","detail","document","getElementById","innerHTML","mapStateToProps","auth","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport {\n  Button,\n  Form,\n  Grid,\n  Header,\n  Message,\n  Segment\n} from \"semantic-ui-react\";\nimport { connect } from \"react-redux\";\nimport { NavLink, Redirect, Link } from \"react-router-dom\";\nimport { authLogin } from \"../store/actions/auth\";\nimport \"./Login.css\"\nimport { GoogleLogin } from 'react-google-login';\nimport axios from \"axios\";\nimport FacebookLogin from 'react-facebook-login';\n// import TiSocialFacebookCircular from 'react-icons/lib/ti/social-facebook-circular';\nimport './Login.css'\nimport './main.js'\n\n// import * as actionTypes from \"./actionTypes\";\nimport { authSuccess, authFail, checkAuthTimeout } from '../store/actions/auth'\nimport { endpoint, endpointlocahost, endpointlocahostsocilauth } from \"../constants\";\n\nclass LoginForm extends React.Component {\n  state = {\n    email: \"\",\n    password: \"\",\n    token: \"\",\n    isLogged: false,\n\n    formData: {\n      email: \"\",\n\n\n    },\n  };\n\n\n\n  handleChange = e => {\n    this.setState({ [e.target.name]: e.target.value });\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n    const { email, password } = this.state;\n    this.props.login(email, password);\n\n  };\n\n  responseGoogle = (response) => {\n    this.setState({ token: response.tokenObj.id_token, loading: false });\n    const { token } = this.state;\n    axios\n      .post(`${endpointlocahost}/social_auth/google/`, {\n        auth_token: token,\n\n      })\n\n      .then(res => {\n        const token = res.data.tokens.access;\n        const expirationDate = new Date(new Date().getTime() + 3600 * 1000);\n        localStorage.setItem(\"token\", token);\n        localStorage.setItem(\"expirationDate\", expirationDate);\n\n        setInterval(function () {\n          window.location.reload();\n        }, 1000);\n      })\n      .catch(err => {\n        console.log(err)\n\n      });\n\n\n  }\n\n\n\n\n\n  responseFacebook = (response) => {\n    console.log(response.accessToken);\n\n\n    this.setState({ token: response.accessToken, loading: false });\n    const { token } = this.state;\n    axios\n\n      .post(`${endpointlocahost}/social_auth/facebook/`, {\n        auth_token: token,\n\n      })\n      .then(res => {\n        const token = res.data.tokens.access;\n        const expirationDate = new Date(new Date().getTime() + 3600 * 1000);\n        localStorage.setItem(\"token\", token);\n        localStorage.setItem(\"expirationDate\", expirationDate);\n        setInterval(function () {\n          window.location.reload();\n        }, 1000);\n\n\n      })\n      .catch(err => {\n\n\n      });\n\n\n\n\n  }\n\n\n  //  refreshPage =() =>{\n  //   window.location.reload();\n  // }\n\n  render() {\n    const { error, loading, token } = this.props;\n    const { email, password } = this.state;\n    if (Object.values(this.props).length > 1) {\n\n      if ((this.props.error) == null) {\n        if (!this.state.isLogged) {\n\n        }\n      }\n      else {\n     \n        var d = this.props.error\n        var err_password_match_err = this.props.error.data\n\n        // ...................... error_messes_password error messes.......................\n\n        if (d == null) {\n        }\n        else {\n          var err_messes = this.props.error.detail\n          \n\n          document.getElementById(\"error_messes\").innerHTML = \"\";\n       \n\n          // ...................... email error messes.......................\n\n          if (err_messes == null) {\n            document.getElementById(\"error_messes\").innerHTML = \"\";\n\n          }\n\n          else {\n\n            document.getElementById(\"error_messes\").innerHTML = err_messes;\n\n          }\n       \n\n        }\n\n\n\n      }\n\n    }\n\n\n\n\n\n\n\n\n\n    if (token) {\n      return <Redirect to=\"/\" />;\n    }\n    return (\n      <>\n\n\n\n      </>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    loading: state.auth.loading,\n    error: state.auth.error,\n    token: state.auth.token\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    login: (email, password) => dispatch(authLogin(email, password))\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(LoginForm);\n"]},"metadata":{},"sourceType":"module"}